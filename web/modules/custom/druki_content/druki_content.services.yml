services:
  logger.channel.druki_content:
    class: Drupal\Core\Logger\LoggerChannel
    factory: logger.factory:get
    arguments: ['druki_content']

  druki_content.git_subscriber:
    class: Drupal\druki_content\EventSubscriber\GitSubscriber
    arguments: ['@druki_content.sync_queue_manager']
    tags:
      - { name: event_subscriber }

  druki_content.sync_queue_manager:
    class: Drupal\druki_content\Sync\SyncQueueManager
    arguments: ['@druki_content.source_content_finder', '@queue', '@state', '@datetime.time']

  druki_content.category.navigation:
    class: Drupal\druki_content\Category\CategoryNavigation
    arguments: ['@current_route_match', '@entity_type.manager']

  druki_content.source_content_finder:
    class: Drupal\druki_content\SourceContent\SourceContentFinder
    arguments: ['@language_manager']

  druki_content.source_content_parser:
    class: Drupal\druki_content\SourceContent\SourceContentParser
    arguments: ['@druki_markdown.parser']

  druki_content.sync_queue_processor:
    class: Drupal\druki_content\Sync\SyncQueueProcessor
    arguments: ['@entity_type.manager', '@druki_content.source_content_parser', '@druki_content.parsed_source_content_loader', '@state', '@database']

  druki_content.parsed_source_content_loader:
    class: Drupal\druki_content\SourceContent\ParsedSourceContentLoader
    arguments: ['@entity_type.manager', '@datetime.time']
